if(titan==null){var titan={controls:{}}}titan.controls.base=$.klass({});var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(d){for(var a=0;a<d.length;a++){var b=d[a].string;var c=d[a].prop;this.versionSearchString=d[a].versionSearch||d[a].identity;if(b){if(b.indexOf(d[a].subString)!=-1){return d[a].identity}}else{if(c){return d[a].identity}}}},searchVersion:function(b){var a=b.indexOf(this.versionSearchString);if(a==-1){return}return parseFloat(b.substring(a+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();titan.controls.button=$.klass(titan.controls.base,{initialize:function(a){this.parameters=a;this.parameters.container.addClass("titan");if(this.parameters.buttonSize==undefined){this.parameters.buttonSize="small"}if(this.parameters.buttonColor==undefined){this.parameters.buttonColor="blue"}if(this.parameters.hoverEffect==undefined){this.parameters.hoverEffect=true}this.render()},render:function(){var a=this;this.button=$("<button>",{"class":"button "+this.parameters.buttonSize+" "+this.parameters.buttonColor}).appendTo(this.parameters.container).html(this.parameters.buttonText);if(this.parameters.hoverEffect){this.button.hover(function(){$(this).addClass("hover");$(this).removeClass(a.parameters.buttonColor)},function(){$(this).removeClass("hover");$(this).addClass(a.parameters.buttonColor)})}this.button.bind("click",function(b){a.parameters.onclick()})}});titan.controls.dropdown=$.klass(titan.controls.base,{initialize:function(a){this.parameters=a;this.parameters.container.addClass("titan");if(this.parameters.width==undefined){this.parameters.width=300}this.render()},render:function(){var a=this;this.ddlBody=$("<div>",{"class":"ddlBody",style:"width:"+this.parameters.width+"px;"}).appendTo(this.parameters.container);this.ddlInput=$("<div>",{"class":"ddlInput float_left",contentEditable:"true",style:"width:"+(this.parameters.width-35)+"px;"}).appendTo(this.ddlBody);this.ddlSelected=$("<div>",{"class":"float_left"}).appendTo(this.ddlBody).hide();this.ddlArrow=$("<div>",{"class":"ddlArrow float_right"}).appendTo(this.ddlBody);this.ddlRemove=$("<div>",{"class":"ddlRemove float_right"}).appendTo(this.ddlBody).hide();$("<div>",{"class":"clear"}).appendTo(this.ddlBody);if(this.parameters.placeholder!=undefined){this.placeholder=$("<div>",{"class":"placeholderdd"}).appendTo(this.parameters.container).html(this.parameters.placeholder)}this.ddlDropdown=$("<div>",{"class":"ddlDropdown",style:"width:"+(this.parameters.width-35)+"px;"}).appendTo(this.ddlBody).hide();this.ddlBody.bind("click",function(b){b.stopPropagation()});this.ddlInput.bind("keydown",function(b){if(!b){b=window.event}var c=b.keyCode;if(b.charCode&&c==0){c=b.charCode}if(c==13){b.preventDefault()}});this.ddlInput.bind("keyup",function(d){var e=$(".ddlSelectedItem");if(!d){d=window.event}var g=d.keyCode;if(d.charCode&&g==0){g=d.charCode}switch(g){case 13:d.preventDefault();if(e.length!=0){var c=undefined;$.each(a.parameters.data,function(i,h){if(h.value==e.eq(0).attr("id")){c=h}});var b=$("<div>",{id:c.value,"class":"ddlListItem",style:"width:"+(a.parameters.width-45)+"px;"});var f=$("<div>",{"class":"float_left ddlImage"}).appendTo(b);$("<div>",{"class":"float_left ellipsis",style:"width:"+(a.parameters.width-100)+"px;"}).appendTo(b).html(c.name);$("<div>",{"class":"clear"}).appendTo(b);$("<img>",{src:c.image,style:"height:20px;width:20px;"}).appendTo(f);a.selectItem(b,c,true)}break;case 38:d.preventDefault();if(e[0]!=undefined){if(e.eq(0).prev()!=undefined){e.eq(0).prev().addClass("ddlSelectedItem");e.eq(0).removeClass("ddlSelectedItem")}}break;case 40:d.preventDefault();if(e.length==0){if(a.ddlDropdown.children().length!=0){a.ddlDropdown.children().eq(0).addClass("ddlSelectedItem")}}else{if(e.eq(0).next().length!=0){e.eq(0).next().addClass("ddlSelectedItem");e.eq(0).removeClass("ddlSelectedItem")}}break;default:a.displayDDL();break}});this.ddlArrow.bind("click",function(b){b.stopPropagation();a.displayDDL()});this.ddlRemove.bind("click",function(b){b.stopPropagation();a.ddlSelected.empty();a.ddlSelected.hide();a.ddlInput.empty();a.ddlInput.show();a.selected=undefined;a.ddlRemove.hide();a.ddlArrow.show();a.ddlDropdown.hide()});$(document).bind("click",function(b){b.stopPropagation();a.ddlDropdown.empty()})},displayDDL:function(){var a=this;this.ddlDropdown.empty();$.each(this.parameters.data,function(c,d){if(d.name.toLowerCase().indexOf(a.ddlInput.html().replace(/\<br\>/g,"").toLowerCase())!=-1){var b=$("<div>",{id:d.value,"class":"ddlListItem",style:"width:"+(a.parameters.width-45)+"px;"}).appendTo(a.ddlDropdown).bind("click",function(){b.removeClass("ddlSelectedItem");a.selectItem(b,d,true)});var e=$("<div>",{"class":"float_left ddlImage"}).appendTo(b);$("<div>",{"class":"float_left ellipsis",style:"width:"+(a.parameters.width-100)+"px;"}).appendTo(b).html(d.name);$("<div>",{"class":"clear"}).appendTo(b);$("<img>",{src:d.image,style:"height:20px;width:20px;"}).appendTo(e);b.bind("mouseenter",function(f){f.stopPropagation();b.addClass("ddlSelectedItem")});b.bind("mouseleave",function(f){f.stopPropagation();b.removeClass("ddlSelectedItem")})}});if(this.ddlDropdown.html()!=""){this.ddlDropdown.show()}},selectItem:function(a,c,b){this.selected=c;a.appendTo(this.ddlSelected);this.ddlDropdown.hide();this.ddlInput.hide();this.ddlInput.empty();this.ddlSelected.show();this.ddlArrow.hide();this.ddlRemove.show();if(b){if(this.parameters.onchange!=undefined){this.parameters.onchange(this.selected)}}},clearValue:function(){this.ddlSelected.empty();this.ddlSelected.hide();this.ddlInput.empty();this.ddlInput.show();this.selected=undefined;this.ddlRemove.hide();this.ddlArrow.show();this.ddlDropdown.hide()},getValue:function(){return this.selected},setValue:function(b){var a=$("<div>",{id:b.value,"class":"ddlListItem",style:"width:"+(this.parameters.width-45)+"px;"});var c=$("<div>",{"class":"float_left ddlImage"}).appendTo(a);$("<div>",{"class":"float_left ellipsis",style:"width:"+(this.parameters.width-100)+"px;"}).appendTo(a).html(b.name);$("<div>",{"class":"clear"}).appendTo(a);$("<img>",{src:b.image,style:"height:20px;width:20px;"}).appendTo(c);this.selectItem(a,b,false)}});titan.controls.grouping=$.klass(titan.controls.base,{initialize:function(a){this.parameters=a;this.parameters.container.addClass("titan");this.controls=[];this.render()},render:function(){var e=$("<div>",{"class":"group",style:"width:"+this.parameters.width+"px;"}).appendTo(this.parameters.container);$("<div>",{"class":"type"}).appendTo(e).html(this.parameters.type);$("<div>",{style:"height:10px;width:10px;"}).appendTo(e);var b=this.parameters.values.length;var f=this.parameters.values;for(var d=0;d<b;d++){var a=parseInt(this.parameters.width)-73;this.controls["lbl_"+f[d].id]=$("<div>",{"class":"float_left smlabel ellipsis",style:"width:"+a+"px;"}).appendTo(e).html(f[d].name);var c=$("<div>",{"class":"float_right"}).appendTo(e);this.controls["val_"+f[d].id]=new titan.controls.toggle({container:c,textOn:"Win",textOff:"Lose",checked:f[d].visible});var g=this;this.controls["val_"+f[d].id].divOuter.bind("click",{myid:f[d].id},function(h){var i=g.controls["val_"+h.data.myid].getValue();g.parameters.onChange(h.data.myid,i)});$("<div>",{"class":"clear"}).appendTo(e)}$("<div>",{"class":"clear"}).appendTo(this.parameters.container);$("<div>",{"class":"float_left",style:"height:5px;"}).appendTo(this.parameters.container);$("<div>",{"class":"clear"}).appendTo(this.parameters.container)}});titan.controls.inputTextbox=$.klass(titan.controls.base,{initialize:function(a){this.parameters=a;this.parameters.container.addClass("titan");if(this.parameters.width==undefined){this.parameters.width=300}this.render()},render:function(){var b=this;var a=$("<div>",{"class":"float_left"}).appendTo(this.parameters.container);this.txtbox=$("<input>",{type:"textbox","class":"txtbox",style:"width:"+this.parameters.width+"px;"}).appendTo(a);if(this.parameters.validationRegex!=undefined){this.dvValidation=$("<div>",{"class":"float_left valFail"}).appendTo(this.parameters.container)}$("<div>",{"class":"clear"}).appendTo(this.parameters.container);if(this.parameters.placeholder!=undefined){this.placeholder=$("<div>",{"class":"placeholder"}).appendTo(this.parameters.container).html(this.parameters.placeholder)}if(this.parameters.validationRegex!=undefined){this.txtbox.bind("keyup",function(){b.runValidation()})}},runValidation:function(){var a=this.parameters.validationRegex.test(this.getValue());if(a){this.dvValidation.removeClass("valFail");this.dvValidation.addClass("valPass")}else{this.dvValidation.removeClass("valPass");this.dvValidation.addClass("valFail")}},isValid:function(){return this.parameters.validationRegex.test(this.getValue())},setValue:function(a){this.txtbox.val(a);if(this.parameters.validationRegex!=undefined){this.runValidation()}},getValue:function(){return this.txtbox.val()}});titan.controls.popup=$.klass(titan.controls.base,{initialize:function(a){this.parameters=a;this.parameters.container.addClass("titan");if(this.parameters.width==undefined){this.parameters.width=300}if(this.parameters.height==undefined){this.parameters.height=300}if(this.parameters.minWidth==undefined){this.parameters.minWidth=250}if(this.parameters.maxWidth==undefined){this.parameters.maxWidth=1000}if(this.parameters.minHeight==undefined){this.parameters.minHeight=250}if(this.parameters.maxHeight==undefined){this.parameters.maxHeight=1000}if(this.parameters.resizable==undefined){this.parameters.resizable=true}if(this.parameters.draggable==undefined){this.parameters.draggable=true}if(this.parameters.blackout==undefined){this.parameters.blackout=false}this.render()},render:function(){var d=this;if(this.parameters.blackout!=undefined){this.blackout=$("<div>",{"class":"blackout"}).appendTo(this.parameters.container);this.blackout.bind("click",function(e){e.stopPropagation()})}this.popupContainer=$("<div>",{id:"popup","class":"popup",style:"width:"+this.parameters.width+"px;height:"+this.parameters.height+"px;"}).appendTo(this.parameters.container);this.popupContainer.bind("click",function(e){e.stopPropagation()});this.popupContainer.css("position","absolute");var c=$("<div>",{"class":"pheader"}).appendTo(this.popupContainer);$("<div>",{"class":"float_left ellipsis",style:"width:150px;"}).appendTo(c).html(this.parameters.headerText);if(this.parameters.headerExtra!=undefined){this.parameters.headerExtra.addClass("float_left");this.parameters.headerExtra.appendTo(c)}var b=$("<div>",{"class":"float_right"}).appendTo(c);$("<div>",{"class":"clear"}).appendTo(c);$("<div>",{"class":"content"}).appendTo(this.popupContainer).html(this.parameters.content);var a=new titan.controls.button({container:b,buttonText:"close"});a.button.bind("mousedown",function(e){e.stopPropagation();if(d.parameters.closeCallback!=undefined){d.parameters.closeCallback()}d.close()});if(this.parameters.draggable){this.popupContainer.draggable({handle:"div.pheader"})}if(this.parameters.resizable){this.popupContainer.resizable({minWidth:d.parameters.minWidth,maxWidth:d.parameters.maxWidth,minHeight:d.parameters.minHeight,maxHeight:d.parameters.maxHeight,resize:function(f,g){var e=d.popupContainer.height();d.parameters.resizeCallback(e)}})}},close:function(){if(this.blackout!=undefined){this.blackout.remove()}this.popupContainer.remove()},hide:function(){if(this.blackout!=undefined){this.blackout.hide()}this.popupContainer.hide()},show:function(){if(this.blackout!=undefined){this.blackout.show()}this.popupContainer.show()}});titan.controls.spiderweb=$.klass(titan.controls.base,{initialize:function(a){this.parameters=a;this.parameters.container.addClass("titanspider");this.data=this.parameters.data;this.layout=[];this.getLayout();this.render()},getLayout:function(){this.layout.push({left:130,top:30,radius:70,num:1});this.layout.push({left:300,top:500,radius:69,num:2});this.layout.push({left:480,top:65,radius:68,num:3});this.layout.push({left:35,top:450,radius:67,num:4});this.layout.push({left:490,top:305,radius:66,num:5});this.layout.push({left:65,top:200,radius:65,num:6});this.layout.push({left:25,top:120,radius:64,num:7});this.layout.push({left:480,top:480,radius:63,num:8});this.layout.push({left:450,top:230,radius:62,num:9});this.layout.push({left:215,top:65,radius:61,num:10});this.layout.push({left:300,top:25,radius:60,num:11});this.layout.push({left:100,top:520,radius:59,num:12});this.layout.push({left:200,top:480,radius:58,num:13});this.layout.push({left:25,top:30,radius:57,num:14});this.layout.push({left:490,top:150,radius:56,num:15});this.layout.push({left:60,top:365,radius:55,num:16});this.layout.push({left:450,top:380,radius:54,num:17});this.layout.push({left:25,top:285,radius:53,num:18});this.layout.push({left:390,top:40,radius:52,num:19});this.layout.push({left:380,top:460,radius:51,num:20})},render:function(){var e=this;if(this.parameters.title!=undefined){$("<div>",{"class":"title"}).appendTo(this.parameters.container).html(this.parameters.title)}if(this.parameters.subtitle!=undefined){$("<div>",{"class":"subtitle"}).appendTo(this.parameters.container).html(this.parameters.subtitle)}$("<div>",{id:"spiderdiv",style:"position:absolute;z-index:0;"}).appendTo(this.parameters.container);$("<canvas>",{id:"spidercanvas",style:""}).appendTo(this.parameters.container);$("#spidercanvas")[0].height=590;$("#spidercanvas")[0].width=590;if(this.isIE8()){G_vmlCanvasManager.initElement($("#spidercanvas")[0])}var b=$("#spidercanvas")[0].getContext("2d");var a=0;$.each(this.data,function(q,j){b.beginPath();var g=e.layout[a].left+Math.round(e.layout[a].radius/2);var o=e.layout[a].top+Math.round(e.layout[a].radius/2);b.moveTo(g,o);b.lineTo(290,290);b.strokeStyle="#666666";b.closePath();b.stroke();var f=e.layout[a].left-Math.round(e.layout[a].radius/2);var k=e.layout[a].top;var h=e.layout[a].radius*2;var m=e.layout[a].left-Math.round(e.layout[a].radius/2);var i=e.layout[a].top+e.layout[a].radius-45;var t=e.layout[a].radius*2;var s=undefined;var n=undefined;s=$("<div>",{style:"cursor:pointer;color:#"+e.parameters.displayHexColor+";font-weight:bold;font-family:arial;font-size:9pt;position:absolute;z-index:15;margin-left:"+f+"px;margin-top:"+(k-15)+"px;width:"+h+"px;text-align:center;"}).appendTo($("#spiderdiv")).html(j.name).hide();n=$("<div>",{style:"cursor:pointer;text-shadow: -0px -0px 3px #000000;color:#aaf4b1;font-weight:bold;font-family:arial;font-size:16pt;position:absolute;z-index:15;margin-left:"+m+"px;margin-top:"+i+"px;width:"+t+"px;text-align:center;"}).appendTo($("#spiderdiv")).html(j.display);s.bind("click",function(){e.parameters.onclick(j)});n.bind("click",function(){e.parameters.onclick(j)});n.bind("mouseenter",function(){s.show()});n.bind("mouseleave",function(){s.hide()});var p=e.layout[a].left;var r=e.layout[a].top;var l=$("<div>",{style:"position:absolute;z-index:10;margin-left:"+p+"px;margin-top:"+r+"px;cursor:pointer;"}).appendTo($("#spiderdiv"));$("<img>",{src:j.pictureUrl,style:"border-width:1px;border-color:#aaaaaa;border-style:solid;border-radius:"+Math.round(e.layout[a].radius/2)+"px;-webkit-border-radius:"+Math.round(e.layout[a].radius/2)+"px;-moz-border-radius:"+Math.round(e.layout[a].radius/2)+"px;height:"+e.layout[a].radius+"px;width:"+e.layout[a].radius+"px;behavior: url(/js/libraries/PIE.htc);"}).appendTo(l);l.bind("click",function(){e.parameters.onclick(j)});l.bind("mouseenter",function(){s.show()});l.bind("mouseleave",function(){s.hide()});a++});b.beginPath();b.arc(290,290,75,0,Math.PI*2,true);b.closePath();b.fillStyle="#"+this.parameters.middlePictureHexColor;b.fill();b.stroke();var d=290-50;var c=290-50;$("<img>",{src:this.parameters.middlePictureUrl,style:"position:absolute;font-size:12pt;z-index:5;margin-left:"+d+"px;margin-top:"+c+"px;text-align:center;"}).appendTo($("#spiderdiv"))},isIE8:function(){var b=BrowserDetect.browser;var a=BrowserDetect.version;if(b=="Explorer"&&a==8){return true}else{return false}},isIE9:function(){var b=BrowserDetect.browser;var a=BrowserDetect.version;if(b=="Explorer"&&a==9){return true}else{return false}}});titan.controls.toggle=$.klass(titan.controls.base,{initialize:function(a){this.parameters=a;this.parameters.container.addClass("titan");if(this.parameters.textOn!=undefined&&this.parameters.textOff!=undefined){this.on=this.parameters.textOn;this.off=this.parameters.textOff}else{this.on="Yes";this.off="No"}this.render();if(this.parameters.checked!=undefined){if(this.parameters.checked=="1"){this.setValue(1)}else{this.setValue(0)}}},render:function(){this.divOuter=$("<div>",{"class":"toggle outer float_left"}).appendTo(this.parameters.container);this.divInnerCtrl=$("<div>",{"class":"inner on"}).appendTo(this.divOuter);this.divInnerText=$("<div>",{"class":"innertext float_right"}).appendTo(this.divOuter).html(this.on);$("<div>",{"class":"clear"}).appendTo(this.parameters.container);$("<div>",{style:"height:5px;"}).appendTo(this.parameters.container);$("<div>",{"class":"clear"}).appendTo(this.parameters.container);var a=this;this.divOuter.bind("click",function(b){if(a.divInnerCtrl.hasClass("on")){a.divInnerCtrl.addClass("off");a.divInnerCtrl.removeClass("on");a.divInnerText.html(a.off);a.divInnerText.removeClass("float_right");a.divInnerText.addClass("float_left")}else{a.divInnerCtrl.addClass("on");a.divInnerCtrl.removeClass("off");a.divInnerText.removeClass("float_left");a.divInnerText.addClass("float_right");a.divInnerText.html(a.on)}})},getValue:function(){if(this.divInnerCtrl.hasClass("on")){return 1}else{return 0}},setValue:function(a){if(a==1){this.divInnerCtrl.addClass("on");this.divInnerCtrl.removeClass("off");this.divInnerText.removeClass("float_left");this.divInnerText.addClass("float_right");this.divInnerText.html(this.on)}else{this.divInnerCtrl.addClass("off");this.divInnerCtrl.removeClass("on");this.divInnerText.removeClass("float_right");this.divInnerText.addClass("float_left");this.divInnerText.html(this.off)}}});titan.controls.tooltip=$.klass(titan.controls.base,{initialize:function(a){this.parameters=a;this.parameters.container.addClass("titan");if(this.parameters.width==undefined){this.parameters.width=300}if(this.parameters.xOffset==undefined){this.parameters.xOffset=0}if(this.parameters.yOffset==undefined){this.parameters.yOffset=0}this.render()},render:function(){var a=this;this.tooltip=$("<div>",{"class":"tooltip",style:"width:"+this.parameters.width+"px;margin-top:"+this.parameters.yOffset+"px;margin-left:"+this.parameters.xOffset+"px;"}).appendTo(this.parameters.container).html(this.parameters.text);this.hide();this.parameters.container.bind("mouseenter",function(){a.show()});this.parameters.container.bind("mouseleave",function(){a.hide()})},hide:function(){this.tooltip.hide()},show:function(){this.tooltip.show()}});titan.controls.radioGroup=$.klass(titan.controls.base,{initialize:function(a){this.parameters=a;this.parameters.container.addClass("titan");this.render()},render:function(){var a=this;this.selected=undefined;$.each(this.parameters.items,function(b,c){var d="unchecked";if(a.parameters.selected!=undefined){if(c.value==a.parameters.selected.value){a.selected=c;d="checked"}}a.radio=$("<div>",{id:"rdo_"+c.value,"class":"radio float_left "+d}).appendTo(a.parameters.container);$("<div>",{"class":"radiolabel float_left"}).appendTo(a.parameters.container).html(c.name);$("<div>",{"class":"clear"}).appendTo(a.parameters.container);a.radio.bind("click",function(){a.switchSelected(c,true)})})},switchSelected:function(b,a){if(this.selected!=undefined){if(b.value!=this.selected.value){this.selected=b.value;$(".radio").removeClass("checked").addClass("unchecked");$("#rdo_"+b.value).removeClass("unchecked").addClass("checked");if(this.parameters.onchange!=undefined&&a){this.parameters.onchange()}}}else{this.selected=b.value;$("#rdo_"+b.value).removeClass("unchecked").addClass("checked");if(this.parameters.onchange!=undefined&&a){this.parameters.onchange()}}},getValue:function(){return this.selected},setValue:function(a){this.switchSelected(a,false)}});titan.controls.checkbox=$.klass(titan.controls.base,{initialize:function(a){this.parameters=a;this.parameters.container.addClass("titan");if(this.parameters.label==undefined){this.parameters.label=""}if(this.parameters.checked==undefined){this.parameters.checked=false}this.render()},render:function(){var a=this;this.checked=this.parameters.checked;this.cbox=$("<div>",{"class":"cbox float_left"}).appendTo(this.parameters.container);$("<div>",{"class":"checkboxlabel float_left"}).appendTo(this.parameters.container).html(this.parameters.label);$("<div>",{"class":"clear"}).appendTo(this.parameters.container);if(this.checked){this.cbox.addClass("checked")}else{this.cbox.addClass("unchecked")}this.cbox.bind("click",function(){if(a.checked){a.checked=false;a.cbox.removeClass("checked");a.cbox.addClass("unchecked")}else{a.checked=true;a.cbox.removeClass("unchecked");a.cbox.addClass("checked")}if(a.parameters.onchange!=undefined){a.parameters.onchange()}})},getValue:function(){return this.checked},setValue:function(a){this.checked=a;if(this.checked){this.checked=true;this.cbox.removeClass("unchecked");this.cbox.addClass("checked")}else{this.checked=false;this.cbox.removeClass("checked");this.cbox.addClass("unchecked")}}});titan.controls.textarea=$.klass(titan.controls.base,{initialize:function(a){this.parameters=a;this.parameters.container.addClass("titan");if(this.parameters.width==undefined){this.parameters.width=300}if(this.parameters.height==undefined){this.parameters.height=100}this.render()},render:function(){var b=this;$("<div>",{"class":"taplaceholder"}).appendTo(this.parameters.container).html(this.parameters.placeholder);var a=$("<div>").appendTo(this.parameters.container);this.txtarea=$("<textarea>",{"class":"textarea",style:"width:"+this.parameters.width+"px;height:"+this.parameters.height+"px;"}).appendTo(a);if(this.parameters.value!=undefined){this.setValue(this.parameters.value)}this.txtarea.bind("change",function(){if(b.parameters.onchange!=undefined){b.parameters.onchange()}})},getValue:function(){return this.txtarea.val()},setValue:function(a){this.txtarea.val(a)}});titan.controls.doubleMultiselect=$.klass(titan.controls.base,{initialize:function(a){this.parameters=a;this.parameters.container.addClass("titan");if(this.parameters.height==undefined){this.parameters.height=300}if(this.parameters.width==undefined){this.parameters.width=600}this.multiselectWidth=(this.parameters.width-50)/2;this.arrowMarginTop=(this.parameters.height/2)-30;this.render()},render:function(){var a=this;this.selected=[];this.dvLeft=$("<div>",{"class":"multiselect float_left",style:"width:"+this.multiselectWidth+"px;height:"+this.parameters.height+"px;"}).appendTo(this.parameters.container);$("<div>",{"class":"multiarrow float_left",style:"margin-top:"+this.arrowMarginTop+"px;"}).appendTo(this.parameters.container);this.dvRight=$("<div>",{"class":"multiselect float_left",style:"width:"+this.multiselectWidth+"px;height:"+this.parameters.height+"px;"}).appendTo(this.parameters.container);$("<div>",{"class":"clear"}).appendTo(this.parameters.container);$.each(this.parameters.items,function(c,d){var e=$("<div>",{id:"multi_"+d.id,"class":"multiitem"}).appendTo(a.dvLeft);var b=$("<div>",{"class":"float_left"}).appendTo(e);$("<img>",{src:d.picture_url,style:"height:26px;width:26px;margin:2px;"}).appendTo(b);$("<div>",{"class":"float_left itemtext"}).appendTo(e).html(d.name);$("<div>",{"class":"clear"}).appendTo(e);e.bind("mouseenter",function(){e.addClass("multihover")});e.bind("mouseleave",function(){e.removeClass("multihover")});e.bind("click",function(){a.selectItem(d,true)})})},selectItem:function(a,d){var e=this;var c=$("#multi_"+a.id);if($.inArray(a,e.selected)==-1){e.selected.push(a);var b=c.clone().attr("id","multiS_"+a.id).appendTo(e.dvRight);c.addClass("multiselected");b.unbind("mouseenter");b.unbind("mouseleave");b.removeClass("multihover");b.bind("mouseenter",function(){b.addClass("multihover")});b.bind("mouseleave",function(){b.removeClass("multihover")});b.bind("click",function(){var f=[];f.push(a);e.removeValues(f)});if(e.parameters.onchange!=undefined&&d){e.parameters.onchange()}}},getValues:function(){return this.selected},setValues:function(a){var b=this;$.each(a,function(c,d){b.selectItem(d,false)})},removeValues:function(a){var b=this;$.each(a,function(c,e){var g=$("#multi_"+e.id);var f=$("#multiS_"+e.id);g.removeClass("multiselected");var d=[];$.each(b.selected,function(h,i){if(i.id!=f.attr("id").replace("multiS_","")){d.push(i)}});b.selected=d;f.remove();if(b.parameters.onchange!=undefined){b.parameters.onchange()}})}});titan.controls.videoPlayer=$.klass(titan.controls.base,{initialize:function(a){this.parameters=a;this.parameters.container.addClass("titan");if(this.parameters.height==undefined){this.parameters.height=400}if(this.parameters.width==undefined){this.parameters.width=600}if(this.parameters.controls==undefined){this.parameters.controls=true}if(this.parameters.autoplay==undefined){this.parameters.autoplay=false}this.render()},render:function(){var a=this;this.video=$("<video>",{poster:this.parameters.thumbnail,height:this.parameters.height,width:this.parameters.width,controls:this.parameters.controls,autoplay:this.parameters.autoplay}).appendTo(this.parameters.container);$.each(this.parameters.videoFormats,function(b,c){$("<source>",{src:c.url,type:"video/"+c.format}).appendTo(a.video)});this.video.html(this.video.html()+"Your browser does not support HTML video.");if(this.parameters.playcallback!=undefined){this.video.bind("play",function(){a.parameters.playcallback()})}if(this.parameters.pausecallback!=undefined){this.video.bind("pause",function(){a.parameters.pausecallback(a.video.get(0).played.start(0),a.video.get(0).played.end(0))})}},play:function(){this.video.get(0).play()},pause:function(){this.video.get(0).pause()},stop:function(){this.video.get(0).load()}});